(function(a){a.fn.joyride=function(b){var c={tipLocation:"bottom left",scrollSpeed:300,timer:0,startTimerOnClick:false,nextButton:true,tipAnimation:"pop",tipAnimationFadeSpeed:300,cookieMonster:false,cookieName:"JoyRide",cookieDomain:false,tipContainer:"body",inline:false,tipContent:"#joyRideTipContent",postRideCallback:a.noop,postStepCallback:a.noop};b=a.extend(c,b);return this.each(function(){if(a(b.tipContent).length===0){return}a(b.tipContent).hide();var l=a(b.tipContainer).children("*").first().position(),i=a(b.tipContent+" li"),m=0,f=0,j=-1,h,k='<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>';var o=function(r,q,s,p){return'<div class="joyride-tip-guide '+r+'" id="joyRidePopup'+q+'"><span class="joyride-nub"></span><div class="joyride-content-wrapper">'+a(p).html()+s+'<a href="#close" class="joyride-close-tip">X</a>'+h+"</div></div>"};var n=function(r,q,s,p){if(q===0&&c.startTimerOnClick&&c.timer>0||c.timer===0){h=""}else{h=k}if(!r){r=""}if(s){s='<a href="#" class="joyride-next-tip small nice radius yellow button">'+s+"</a>"}else{s=""}if(c.inline){a(o(r,q,s,p)).insertAfter("#"+a(p).data("id"))}else{a(b.tipContainer).append(o(r,q,s,p))}};if(!c.cookieMonster||!a.cookie(c.cookieName)){i.each(function(r){var s=a(this).data("text"),q=a(this).attr("class"),p=this;if(c.nextButton&&!s){s="Next"}if(c.nextButton||!c.nextButton&&c.startTimerOnClick){if(a(this).attr("class")){n(q,r,s,p)}else{n(false,r,s,p)}}else{if(!c.nextButton){if(a(this).attr("class")){n(q,r,"",p)}else{n(false,r,"",p)}}}a("#joyRidePopup"+r).hide()})}showNextTip=function(){var y=a(i[m]).data("id"),C=a("#"+y),p={};a.each((a(i[m]).data("options")||":").split(";"),function(E,F){var G=F.split(":");if(G.length==2){p[a.trim(G[0])]=a.trim(G[1])}});var s=a.extend({},c,p);while(C.offset()===null){m++;f++;if((i.length-1)>j){j++}y=a(i[m]).data("id");C=a("#"+y);if(a(i).length<m){break}}var x=Math.ceil(a(window).height()/2),v=a("#joyRidePopup"+m),B=C.offset(),q=C.outerHeight(),z=v.outerHeight(),u=Math.ceil(a(".joyride-nub").outerHeight()/2),t=0;if(v.length===0){return}if(m<i.length){if(s.tipAnimation=="pop"){a(".joyride-timer-indicator").width(0);if(s.timer>0){v.show().children(".joyride-timer-indicator-wrap").children(".joyride-timer-indicator").animate({width:a(".joyride-timer-indicator-wrap").width()},s.timer)}else{v.show()}}else{if(s.tipAnimation=="fade"){a(".joyride-timer-indicator").width(0);if(s.timer>0){v.fadeIn(s.tipAnimationFadeSpeed).children(".joyride-timer-indicator-wrap").children(".joyride-timer-indicator").animate({width:a(".joyride-timer-indicator-wrap").width()},s.timer)}else{v.fadeIn(s.tipAnimationFadeSpeed)}}}var D=v.children(".joyride-nub");var r=B.left-l.left;D.removeClass("bottom").removeClass("top").removeClass("right");if(a(window).scrollLeft()+a(window).width()<r+v.width()){r-=(v.width()-D.offset().left*2);D.addClass("right")}if(Modernizr.mediaqueries&&Modernizr.mq("only screen and (max-width: 769px)")){if(s.tipLocation.indexOf("top")!=-1){if(z>=B.top){v.offset({top:((B.top+q+u)-l.top)});D.addClass("top").css({left:r})}else{v.offset({top:((B.top)-(z+l.top+u))});D.addClass("bottom").css({left:r})}}else{v.offset({top:(B.top+q+u)});D.addClass("top").css({left:r})}}else{if(s.tipLocation=="top"){if(z>=B.top){v.offset({top:((B.top+q+u)-l.top),left:r});D.addClass("top")}else{v.offset({top:((B.top)-(z+l.top+u)),left:r});D.addClass("bottom")}}else{v.offset({top:(B.top+q+u),left:r});D.addClass("top")}}if(s.tipLocation.indexOf("right")!=-1){v.offset({left:(B.left-l.left-v.width()+C.width())});v.children(".joyride-nub").addClass("right")}t=Math.ceil(v.offset().top-x);a("html, body").animate({scrollTop:t},s.scrollSpeed);if(m>0){var w;if(f>0){w=j-f;f=0}else{w=j}if(s.tipAnimation=="pop"){a("#joyRidePopup"+w).hide()}else{if(s.tipAnimation=="fade"){a("#joyRidePopup"+w).fadeOut(s.tipAnimationFadeSpeed)}}}}else{if((i.length-1)<m){var A;if(f>0){A=j-f;f=0}else{A=j}if(c.cookieMonster===true){a.cookie(c.cookieName,"ridden",{expires:365,domain:c.cookieDomain})}if(s.tipAnimation=="pop"){a("#joyRidePopup"+A).fadeTo(0,0)}else{if(s.tipAnimation=="fade"){a("#joyRidePopup"+A).fadeTo(s.tipAnimationFadeSpeed,0)}}}}m++;if(j<0){j=0}else{if((i.length-1)>j){j++}}if(c.postStepCallback!=a.noop){c.postStepCallback(j)}};if(!c.inline||!c.cookieMonster||!a.cookie(c.cookieName)){a(window).resize(function(){var t=a(i[j]).data("id"),q=a("#"+t).offset(),r=a("#"+t).outerHeight(),s=a("#joyRidePopup"+j).outerHeight(),p=Math.ceil(a(".joyride-nub").outerHeight()/2);if(Modernizr.mediaqueries&&Modernizr.mq("only screen and (max-width: 769px)")){if(c.tipLocation.indexOf("bottom")!=-1){a("#joyRidePopup"+j).offset({top:(q.top+r+p),left:0});a("#joyRidePopup"+j).children(".joyride-nub").addClass("top").removeClass("bottom").css({left:(q.left-l.left)})}else{if(c.tipLocation.indexOf("top")!=-1){if(q.top<=s){a("#joyRidePopup"+j).offset({top:(q.top+p+r),left:0});a("#joyRidePopup"+j).children(".joyride-nub").addClass("top").removeClass("bottom").css({left:(q.left-l.left)})}else{a("#joyRidePopup"+j).offset({top:((q.top)-(s+p)),left:0});a("#joyRidePopup"+j).children(".joyride-nub").addClass("bottom").removeClass("top").css({left:(q.left-l.left)})}}}}else{if(c.tipLocation=="bottom"){a("#joyRidePopup"+j).offset({top:(q.top+r+p),left:q.left});a("#joyRidePopup"+j).children(".joyride-nub").addClass("top").removeClass("bottom").css({left:""})}else{if(c.tipLocation=="top"){if(q.top<=s){a("#joyRidePopup"+j).offset({top:(q.top+p+r),left:q.left});a("#joyRidePopup"+j).children(".joyride-nub").addClass("top").removeClass("bottom").css({left:""})}else{a("#joyRidePopup"+j).offset({top:((q.top)-(s+p)),left:q.left});a("#joyRidePopup"+j).children(".joyride-nub").addClass("bottom").removeClass("top").css({left:""})}}}}})}var e=null,d=false;if(!c.startTimerOnClick&&c.timer>0){showNextTip();e=setInterval(function(){showNextTip()},c.timer)}else{showNextTip()}var g=function(r,s,q,p){r.preventDefault();clearInterval(s);if(q){a.cookie(c.cookieName,"ridden",{expires:365,domain:c.cookieDomain})}a(p).parent().parent().hide();if(c.postRideCallback!=a.noop){c.postRideCallback()}};a(".joyride-close-tip").click(function(p){g(p,e,c.cookieMonster,this)});a(".joyride-next-tip").click(function(p){p.preventDefault();if(m>=i.length){g(p,e,c.cookieMonster,this)}if(c.timer>0&&c.startTimerOnClick){showNextTip();clearInterval(e);e=setInterval(function(){showNextTip()},c.timer)}else{if(c.timer>0&&!c.startTimerOnClick){clearInterval(e);e=setInterval(function(){showNextTip()},c.timer)}else{showNextTip()}}})})};jQuery.cookie=function(e,f,c){if(arguments.length>1&&String(f)!=="[object Object]"){c=jQuery.extend({},c);if(f===null||f===undefined){c.expires=-1}if(typeof c.expires==="number"){var h=c.expires,d=c.expires=new Date();d.setDate(d.getDate()+h)}f=String(f);return(document.cookie=[encodeURIComponent(e),"=",c.raw?f:encodeURIComponent(f),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join(""))}c=f||{};var b,g=c.raw?function(i){return i}:decodeURIComponent;return(b=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?g(b[1]):null}})(jQuery);